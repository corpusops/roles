---
- include_role: {name: corpusops.roles/vars_registry}
  vars: {cops_vars_registry_target: corpusops_php_ext}
  tags: [corpusops_php_ext, corpusops_php_ext_vars]
  no_log: "{{not (cops_vars_debug|default(false))}}"
- include_jinja_vars:
    content: |-
      ---
      {% set prefix = 'corpusops_php_ext_' %}
      {% set data = vars[prefix+'vars'] %}
      {% set _ = data.exts.append(data.ext) %}
      {{ (data
         | copsf_registry_to_vars(
             vars, prefix, global_scope=True)
         )[0]
         | to_json}}
  vars: {cops_vars_registry_target: corpusops_php_ext}
  tags: [corpusops_php_ext, corpusops_php_ext_vars]
  no_log: "{{not (cops_vars_debug|default(false))}}"
- name: "PHP: install extensions"
  include_tasks: run.yml
  tags: [corpusops_php_ext, corpusops_php_ext_run]
