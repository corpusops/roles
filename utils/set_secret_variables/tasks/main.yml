---
# need those vars:
#   secretvariables:
#     variables: list of variables to get
#     path: filesystem container directory for secrets
#     registry_prefix: (opt) registry prefix
# see also ./set_secret_variable.yml
- debug:
    msg:
      name: "{{item}}"
      path: "{{secretvariables.path|default(corpusops_vars.secrets_dir)}}"
      registry_prefix: "{{secretvariables.registry_prefix|default(none)}}"
  register: secretvariablesdata
  with_items: "{{secretvariables.variables}}"
- include_tasks: set_secret_variable.yml
  loop_control: {loop_var: secretvariable}
  with_items: |-
              {% set ret = [] %}
              {% for i in secretvariablesdata.results %}
              {% set _ = ret.append(i.msg) %}
              {% endfor %}
              {{ ret | to_json }}
