---
- include_jinja_vars:
    content: |-
      ---
      {% set prefix = 'corpusops_localsettings_nodejs_' %}
      {% set knobs = ['mirror', 'repo', 'version',
                      'configs', 'sources_lists', 'packages'] %}
      {% set snamespaced, vars = vars | copsf_registry(prefix) %}
      {% set namespaced = snamespaced[prefix+'vars'] %}
      {% set v = 'version' %}
      {% if namespaced[v] and (namespaced[v] not in namespaced[v+'s']) %}
      {%  set _ = namespaced[v+'s'].append(namespaced[v])%}
      {% endif %}
      {{ (snamespaced[prefix+'vars']
           | copsf_registry_to_vars(
               vars, prefix, global_scope=True)
             )[0] | to_json}}
  tags: [corpusops_vars, corpusops_localsettings_nodejs_vars]
  no_log: "{{not (cops_vars_debug|default(false))}}"
